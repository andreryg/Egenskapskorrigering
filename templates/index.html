<!doctype html>
<html>
    <head>
        <title>Index</title>
        <link rel="stylesheet" href="../static/index.css">
        <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    </head>
    <body>
        <form method="post">
            <div class="dank">
                <input type="radio" id="vegkryss" name="objekt" value="0">
                <label for="vegkryss">Vegkryss</label><br>
                <input type="radio" id="bru" name="objekt" value="1">
                <label for="bru">Bru</label><br>
                <input type="radio" id="avkjørsel" name="objekt" value="2">
                <label for="avkjørsel">Avkjørsel</label><br>
            </div>
            <div class="0 box">
                <input type="checkbox" id="type" name="objekt0" value="type">
                <label for="type">Type</label><br>
                <input type="checkbox" id="kryssnummer" name="objekt0" value="kryssnummer">
                <label for="kryssnummer">Kryssnummer</label><br>
                <input type="checkbox" id="armer" name="objekt0" value="armer">
                <label for="armer">Armer i Rundkjøring</label><br>
                <input type="checkbox" id="kanalisering1" name="objekt0" value="kanalisering1">
                <label for="kanalisering1">Kanalisering primærveg</label><br>
                <input type="checkbox" id="kanalisering2" name="objekt0" value="kanalisering2">
                <label for="kanalisering2">Kanalisering sekundærveg</label><br>
            </div>
            <div class="1 box">
                <input type="checkbox" id="kategori" name="objekt1" value="kategori">
                <label for="kategori">Brukategori</label><br>
                <input type="checkbox" id="status" name="objekt1" value="status">
                <label for="status">Status</label><br>
                <input type="checkbox" id="materialtype" name="objekt1" value="materialtype">
                <label for="materialtype">Materialtype</label><br>
            </div>
            <div class="2 box">
                <input type="checkbox" id="bruksområde" name="objekt2" value="bruksområde">
                <label for="bruksområde">Bruksområde</label><br>
                <input type="checkbox" id="primæraktivitet" name="objekt2" value="primæraktivitet">
                <label for="primæraktivitet">Primæraktivitet</label><br>
            </div>
            <div>
                <label for="filter">Filter:</label>
                <input type="text" id="filter" name="filter"><br>
                <button class="btn" type="submit" onclick="sendData()">Ferdig</button>
            </div>
        </form>
    <script>
        $(document).ready(function(){
            $('input[type="radio"]').click(function(){
                var inputValue = $(this).attr("value");
                var targetBox = $("." + inputValue);
                $(".box").not(targetBox).hide();
                $(targetBox).show();
            })
        })
        function sendData() {
            var objekt = document.querySelector('input[name="objekt"]:checked').value
            var underegenskap = "objekt" + objekt
            console.log(underegenskap)
            var egenskaper = document.getElementsByName(underegenskap);
            for (var i=0; i<egenskaper.length; i++) {
                objekt += (egenskaper[i].checked? "1" : "0")
            }
            console.log(objekt)
            console.log(egenskaper)
            
            const request = new XMLHttpRequest()
            request.open('POST', `/send/${objekt}`)
            request.send()
        }
    </script>
    </body>
</html>